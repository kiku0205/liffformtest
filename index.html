<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>質問フォーム</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 500px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 10px;
    }
    input, textarea, button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background-color: #007BFF;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h2>質問フォーム</h2>
  <form id="question-form">
    <label for="name">お名前:</label>
    <input type="text" id="name" name="name" required />

    <label for="contact">メールアドレスまたは電話番号:</label>
    <input type="text" id="contact" name="contact" required placeholder="例: example@email.com または 090-1234-5678" />

    <label for="question">質問内容:</label>
    <textarea id="question" name="question" rows="5" required></textarea>

    <button type="submit">送信</button>
  </form>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
  <script>
    const liffId = "2007106741-nWbdQONy"; // LIFF IDを設定

    $(document).ready(function () {
      initializeLiff(liffId);
    });

    function initializeLiff(liffId) {
      liff.init({ liffId: liffId })
        .then(() => console.log('LIFF initialized'))
        .catch(err => console.error('LIFF Initialization failed', err));
    }

    document.getElementById('question-form').onsubmit = function (e) {
  e.preventDefault();
  const name = document.getElementById('name').value;
  const contact = document.getElementById('contact').value;
  const question = document.getElementById('question').value;

  const message = `【質問フォーム】\n名前: ${name}\n連絡先: ${contact}\n質問内容: ${question}`;

  if (liff.isLoggedIn()) {
    liff.sendMessages([
      { type: 'text', text: message },
      { type: 'text', text: '質問フォームからの送信です。' }
    ])
    .then(() => {
      alert('送信しました');
      liff.closeWindow();
    })
    .catch(err => alert('送信失敗: ' + err));
  } else {
    alert('LINEにログインしてください');
    liff.login();
  }
}
  </script>
</body>
</html>
